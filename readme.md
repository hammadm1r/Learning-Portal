# ğŸ“ Student & Teacher Login Portal

This project is a secure web-based login portal that authenticates **students** and **teachers** against an **Oracle 19c** database. It supports role-based dashboards, session handling, password expiry alerts, and account lockout after multiple failed attempts.

---

## ğŸ“Œ Features

- ğŸ” Secure login with username, password & role (Student/Teacher)
- âœ… Role-based dashboards with custom menu items
- ğŸ” Session management using `express-session`
- ğŸš« Account lockout after 3 failed attempts
- â³ Password expiry warning (if < 5 days remaining)
- ğŸ¨ Beautiful and responsive UI using EJS + CSS

---

## ğŸ§  Learning Objectives (CLOs)

| CLO | Description |
|-----|-------------|
| CLO 2 | Design schemas: tables, users, roles & privileges in Oracle |
| CLO 3 | Host and secure a local web service (Apache + PHP / Node.js) |
| CLO 4 | Use SQL and PL/SQL for database manipulation and access control |

---

## ğŸ—ï¸ Tech Stack

- **Backend**: Node.js, Express
- **Frontend**: EJS, HTML5, CSS3
- **Database**: Oracle 19c
- **Session**: express-session
- **Oracle Driver**: `oracledb` Node.js module
- **Authentication**: Custom logic + Oracle profiles

---

## ğŸ—‚ï¸ Folder Structure

DB-Project/
â”œâ”€â”€ routes/
â”‚ â””â”€â”€ login.js # Main login and dashboard logic
â”œâ”€â”€ views/
â”‚ â”œâ”€â”€ index.ejs # Login form
â”‚ â””â”€â”€ dashboard.ejs # Role-based dashboard
â”œâ”€â”€ public/
â”‚ â””â”€â”€ style.css # Custom styling
â”œâ”€â”€ index.js # Express server entry point
â””â”€â”€ README.md


---

## âš™ï¸ Setup Instructions

### ğŸ”§ 1. Install Requirements

- Oracle 11g installed and running (with listener on `1521`)
- Node.js and npm installed
- Instant Client for Oracle (configured in Node.js)

### ğŸ”§ 2. Create Oracle Users & Tables

```sql
-- Tablespace
CREATE TABLESPACE portal_ts DATAFILE 'portal01.dbf' SIZE 100M AUTOEXTEND ON;

-- Secure Profile
CREATE PROFILE secure_profile LIMIT
  FAILED_LOGIN_ATTEMPTS 3
  PASSWORD_LIFE_TIME 15
  PASSWORD_GRACE_TIME 5
  PASSWORD_LOCK_TIME 1;

-- Users
CREATE USER student IDENTIFIED BY student123 DEFAULT TABLESPACE portal_ts PROFILE secure_profile;
CREATE USER teacher IDENTIFIED BY teacher123 DEFAULT TABLESPACE portal_ts PROFILE secure_profile;
CREATE USER portal_admin IDENTIFIED BY portal123 DEFAULT TABLESPACE portal_ts;

-- Grant privileges
GRANT CREATE SESSION, CREATE TABLE TO student, teacher, portal_admin;
GRANT SELECT ON dba_users TO portal_admin;

-- Master Table
CREATE TABLE users (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY,
  username VARCHAR2(50) UNIQUE NOT NULL,
  password_hash VARCHAR2(256) NOT NULL,
  role VARCHAR2(20),
  status VARCHAR2(10),
  failed_attempts NUMBER DEFAULT 0,
  account_locked VARCHAR2(1) DEFAULT 'N'
);

ğŸ”§ 3. PL/SQL Function
CREATE OR REPLACE FUNCTION get_greeting(p_username VARCHAR2)
RETURN VARCHAR2 IS
BEGIN
  RETURN 'Welcome back, ' || INITCAP(p_username) || '!';
END;
/
ğŸ”§ 4. Insert Sample Data
INSERT INTO users (username, password_hash, role, status)
VALUES ('ali', 'password1', 'student', 'ACTIVE');
-- Repeat for other users (students & teachers)
COMMIT;

5. Configure and Run Server
npm install express express-session oracledb body-parser ejs
node app.js
